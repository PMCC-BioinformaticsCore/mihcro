/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Config file for defining DSL2 per module publishing paths
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
*/

process {
    withName: 'QUPATH_STITCH' {
        publishDir = [
            path: { "${params.outdir}/${meta.id}/qupath_stitch" },
            mode: params.publish_dir_mode,
            saveAs: { filename -> filename.equals('versions.yml') ? null : filename }
        ] 
    }

    withName: 'BFTOOLS_TIFFMETAXML' {
        publishDir = [
            path: { "${params.outdir}/${meta.id}/metadata" },
            mode: params.publish_dir_mode,
            saveAs: { filename -> filename.equals('versions.yml') ? null : filename }
        ] 
    }

    withName: 'EXTRACTIMAGECHANNEL' {
        publishDir = [
            path: { "${params.outdir}/${meta.id}/extracted_channel" },
            mode: params.publish_dir_mode,
            saveAs: { filename -> filename.equals('versions.yml') ? null : filename }
        ] 
    }

    withName: "DEEPCELL_MESMER" {
        publishDir = [
            path: { "${params.outdir}/${meta.id}/mesmer" },
            mode: params.publish_dir_mode,
            saveAs: { filename -> filename.equals('versions.yml') ? null : filename }
        ] 
    }

    withName: "CELLPOSE" {
        publishDir = [
            path: { "${params.outdir}/${meta.id}/cellpose" },
            mode: params.publish_dir_mode,
            saveAs: { filename -> filename.equals('versions.yml') ? null : filename }
        ] 
    }

    withName: "MCQUANT" {
        publishDir = [
            path: { "${params.outdir}/${meta.id}/${meta.seg}/mcquant" },
            mode: params.publish_dir_mode,
            saveAs: { filename -> filename.equals('versions.yml') ? null : filename }
        ] 
    }

    withName: "SCIMAP_MCMICRO" {
        publishDir = [
            path: { "${params.outdir}/${meta.id}/${meta.seg}" },
            mode: params.publish_dir_mode,
            saveAs: { filename -> filename.equals('versions.yml') ? null : filename }
        ] 
    }
}
